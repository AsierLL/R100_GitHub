/******************************************************************************
 * Name      : S3A7_REANIBEX_100                                              *
 * Copyright : Osatu S. Coop                                                  *
 * Compiler  : MinGW32                                                        *
 * Target    : Reanibex Series                                                *
 ******************************************************************************/

/*!
 * @file        R100_Tables.c
 * @brief       Zp and Pulse tables definitions
 *
 * @version     v1
 * @date        16/01/2018
 * @author      ltorres
 * @warning     author   date    version     .- Edition
 * @bug
 *
 */

/******************************************************************************
 ** Includes
 */

#include "types_basic.h"
#include "R100_Tables.h"

/******************************************************************************
 ** Macros
 */

/******************************************************************************
 ** Defines
 */

/******************************************************************************
 ** Typedefs
 */

/******************************************************************************
 ** Constants
 */

// Zp Table to convert ADCs to Ohms (@25ºC) - registered on 2-Jun-2022
const ZP_TABLE_t  golden_zp_table [MAX_ZP_ITEMS] =
{
//     Ohms           ADCs      Ikte        index
{         0,       3962615, 0.000000f },    //  0
{         1,       3963182, 0.000272f },    //  1
{        12,       3967821, 0.002501f },    //  2
{        19,       3970323, 0.003703f },    //  3
{        28,       3974081, 0.005508f },    //  4
{        40,       3978861, 0.007805f },    //  5
{        49,       3982705, 0.009651f },    //  6
{        69,       3990895, 0.013586f },    //  7
{        82,       3995977, 0.016027f },    //  8
{       100,       4003167, 0.019481f },    //  9
{       120,       4011501, 0.023485f },    // 10
{       150,       4023331, 0.029168f },    // 11
{       182,       4036207, 0.035354f },    // 12
{       219,       4050377, 0.042161f },    // 13
{       269,       4069549, 0.051371f },    // 14
{       328,       4093295, 0.062779f },    // 15 -- limit to ignore the ECG data frames (set to zero) ...
{       466,       4146413, 0.088297f },    // 16
{       560,       4182577, 0.105671f },    // 17
{       664,       4219975, 0.123637f },    // 18
{       823,       4279124, 0.152052f },    // 19
{       978,       4334662, 0.178733f },    // 20
{      1192,       4409849, 0.214853f },    // 21
{      1491,       4515741, 0.265724f },    // 22
{      1805,       4615713, 0.313751f },    // 23
{      1956,       4664376, 0.337129f },    // 24
{      2161,       4729720, 0.368520f },    // 25
{      2335,       4783648, 0.394427f },    // 26
{      2675,       4882981, 0.442147f },    // 27
{      3290,       5059398, 0.526898f },    // 28
{      3920,       5220235, 0.604165f },    // 29
{      4560,       5371964, 0.677057f },    // 30
{      5480,       5575685, 0.774925f },    // 31
{      6720,       5816207, 0.890472f },    // 32
{      8060,       6044197, 1.000000f },    // 33
{    MAX_ZP_OHMS,  MAX_ZP_ADCS, 1.00f }     // 34 -- table end
};

// Zp matrix to combine temperature with impedance ranges ...
// empiric compensation using 300 ADCs/ºC
const ZP_MATRIX_t golden_zp_matrix [MAX_ZP_MATRIX_ITEMS] =
{
 //    TºC     ADCs_Min              ADCs_Max     ADCs_CAL
 {       0,  3954209.0f -  7500.0f, 6020960.0f,  5568130.0f  },   // Measured data
 {      25,  3946046.0f           , 6001945.0f,  5563626.0f  },   // Measured data @25ºC
 {      33,  3942679.0f +  2400.0f, 5988865.0f,  5561768.0f  },   // Measured data
 {      53,  3936053.0f +  8400.0f, 5973556.0f,  5558980.0f  },   // Measured data
 {      60,  3931415.0f + 10500.0f, 5962840.0f,  5557121.0f  }    // --> projection

#if 0
// Zp matrix to combine temperature with impedance ranges ...
// adjusted (positive ramp in the ZP calibration value)
const ZP_MATRIX_t golden_zp_matrix [MAX_ZP_MATRIX_ITEMS] =
{
 //    TºC     ADCs_Min              ADCs_Max     ADCs_CAL
 {       0,  3954209.0f -  1000.0f, 6020960.0f,  5552589.0f  },   // measured data
 {      25,  3946046.0f          ,  6001945.0f,  5570642.0f  },   // measured data @25ºC
 {      33,  3942679.0f +   400.0f, 5988865.0f,  5577218.0f  },   // measured data
 {      53,  3936053.0f +  1050.0f, 5973556.0f,  5589277.0f  },   // measured data
 {      60,  3931415.0f + 10000.0f, 5962840.0f,  5597718.0f  }    // --> projection
#endif

#if 0
 // original
 {       0,  3954209.0f,  6020960.0f,  5552589.0f  },   // measured data
 {      25,  3946046.0f,  6001945.0f,  5570642.0f  },   // measured data @25ºC
 {      33,  3942679.0f,  5988865.0f,  5577218.0f  },   // measured data
 {      53,  3936053.0f,  5973556.0f,  5589277.0f  },   // measured data
 {      60,  3931415.0f,  5962840.0f,  5597718.0f  }    // --> projection
#endif
};

// Energy table
const ENERGY_TABLE_t  energy_table [] =
{
 //            -- ENERGY TABLES --

 // ZP(ohms)   T1(usec)     V_E50      V_E65      V_E75      V_E90      V_E100     V_E150     V_E175     V_E200

 {       15,      4830,       746,       851,       911,      1001,      1037,      1295,      1395,      1493 },
 {       20,      5190,       749,       854,       915,      1005,      1073,      1300,      1400,      1499 },
 {       25,      5550,       753,       859,       920,      1011,      1080,      1307,      1408,      1507 },
 {       30,      5910,       758,       864,       926,      1017,      1087,      1316,      1417,      1516 },
 {       35,      6270,       763,       867,       932,      1021,      1095,      1320,      1421,      1519 },
 {       40,      6630,       766,       873,       938,      1027,      1103,      1325,      1430,      1529 },
 {       45,      6990,       770,       877,       944,      1032,      1111,      1329,      1432,      1535 },
 {       50,      7350,       775,       882,       949,      1038,      1118,      1337,      1440,      1544 },
 {       55,      7580,       781,       889,       956,      1046,      1128,      1347,      1451,      1556 },
 {       60,      7810,       787,       897,       964,      1053,      1137,      1353,      1462,      1567 },
 {       65,      8040,       791,       903,       969,      1061,      1146,      1359,      1472,      1579 },
 {       70,      8270,       796,       912,       975,      1068,      1155,      1366,      1483,      1590 },
 {       75,      8500,       802,       918,       982,      1076,      1164,      1375,      1493,      1600 },
 {       80,      8730,       807,       924,       988,      1082,      1172,      1384,      1502,      1610 },
 {       85,      8960,       812,       927,       994,      1089,      1180,      1395,      1511,      1616 },
 {       90,      9190,       816,       933,      1000,      1095,      1188,      1403,      1516,      1625 },
 {       95,      9420,       821,       936,      1005,      1101,      1195,      1415,      1524,      1629 },
 {      100,      9650,       825,       941,      1011,      1107,      1202,      1423,      1532,      1638 },
 {      105,      9790,       831,       947,      1018,      1115,      1211,      1432,      1543,      1649 },
 {      110,      9930,       835,       954,      1023,      1122,      1220,      1442,      1553,      1660 },
 {      115,     10070,       840,       960,      1029,      1128,      1193,      1451,      1563,      1671 },
 {      120,     10210,       843,       966,      1033,      1135,      1202,      1461,      1573,      1682 },
 {      125,     10350,       848,       972,      1039,      1142,      1210,      1470,      1583,      1692 },
 {      130,     10480,       853,       978,      1045,      1148,      1217,      1478,      1592,      1701 },
 {      135,     10610,       860,       983,      1054,      1154,      1225,      1486,      1605,      1711 },
 {      140,     10740,       865,       990,      1059,      1160,      1220,      1494,      1613,      1725 },
 {      145,     10870,       871,       995,      1067,      1166,      1226,      1501,      1625,      1733 },
 {      150,     11000,       875,      1000,      1072,      1172,      1233,      1509,      1633,      1742 },
 {      155,     11110,       879,      1005,      1077,      1178,      1240,      1516,      1640,      1750 },
 {      160,     11220,       883,      1009,      1084,      1186,      1246,      1527,      1648,      1767 },
 {      165,     11330,       889,      1014,      1089,      1192,      1265,      1534,      1660,      1775 },
 {      170,     11440,       893,      1018,      1097,      1202,      1271,      1544,      1667,      1791 },
 {      175,     11550,       897,      1022,      1101,      1207,      1277,      1550,      1674,      1795 },
 {      180,     11550,       902,      1028,      1108,      1213,      1285,      1559,      1684,      1795 },
 {      185,     11550,       907,      1034,      1114,      1220,      1292,      1567,      1693,      1795 },
 {      190,     11550,       911,      1039,      1119,      1226,      1300,      1575,      1710,      1795 },
 {      195,     11550,       916,      1044,      1125,      1233,      1307,      1584,      1719,      1795 },
 {      200,     11550,       921,      1050,      1131,      1239,      1315,      1592,      1727,      1795 },
 {      205,     11550,       927,      1057,      1139,      1248,      1325,      1603,      1740,      1795 },
 {      210,     11550,       934,      1065,      1147,      1256,      1335,      1614,      1752,      1795 },
 {      215,     11550,       940,      1072,      1155,      1265,      1345,      1625,      1764,      1795 },
 {      220,     11550,       947,      1079,      1163,      1274,      1355,      1636,      1776,      1795 },
 {      225,     11550,       953,      1087,      1171,      1282,      1365,      1647,      1788,      1795 },
 {      230,     11550,       959,      1094,      1178,      1291,      1375,      1658,      1795,      1795 },
 {      235,     11550,       966,      1101,      1186,      1299,      1385,      1669,      1795,      1795 },
 {      240,     11550,       972,      1108,      1194,      1308,      1395,      1680,      1795,      1795 },
 {      245,     11550,       978,      1116,      1202,      1316,      1405,      1691,      1795,      1795 },
 {      250,     11550,       985,      1123,      1209,      1325,      1415,      1702,      1795,      1795 },
 {      255,     11550,       991,      1130,      1217,      1333,      1425,      1713,      1795,      1795 },
 {      260,     11550,       997,      1137,      1225,      1342,      1435,      1724,      1795,      1795 },
 {      265,     11550,      1003,      1144,      1232,      1350,      1445,      1735,      1795,      1795 },
 {      270,     11550,      1010,      1151,      1240,      1358,      1454,      1745,      1795,      1795 },
 {      275,     11550,      1016,      1158,      1248,      1367,      1464,      1756,      1795,      1795 },
 {      280,     11550,      1022,      1165,      1255,      1375,      1474,      1767,      1795,      1795 },
 {      285,     11550,      1028,      1172,      1263,      1383,      1483,      1777,      1795,      1795 },
 {      290,     11550,      1034,      1179,      1270,      1391,      1493,      1788,      1795,      1795 },
 {      295,     11550,      1040,      1186,      1278,      1400,      1503,      1795,      1795,      1795 },
 {      300,     11550,      1046,      1193,      1285,      1408,      1512,      1795,      1795,      1795 },
 {        0,         0,         0,         0,         0,         0,         0,         0,         0,         0 }
};

/******************************************************************************
 ** Externals
 */

/******************************************************************************
 ** Globals
 */

/******************************************************************************
 ** Locals
 */


/******************************************************************************
 ** Prototypes
 */

